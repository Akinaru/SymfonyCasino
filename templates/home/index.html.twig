{% extends 'base_front.html.twig' %}

{% block title %}ðŸŽ° Symfsino - Accueil{% endblock %}

{% block page_content %}
    <main class="py-4">


        {# â€”â€”â€” HERO â€”â€”â€” #}
        <section class="py-5 mb-4 texte-gris rounded-3">
            <div class="container-fluid py-4">
                <h1 class="display-5 fw-bold">ðŸŽ° Symfsino</h1>
                <p class="col-lg-8 fs-5">
                    Bienvenue dans la salle de jeux. Slots, tirages & jackpots â€” simple, rapide, 100% fun.
                </p>
                <div class="d-flex flex-wrap gap-2 mt-3">
                    <a href="{{ path("app_leaderboard_index") }}" class="btn btn-primary btn-lg">Leaderboard</a>
                    <a href="{{ path("app_market_index") }}" class="btn btn-primary btn-lg">MarchÃ©</a>


                    {% if app.user %}
                        <a href="{{ path("app_inventory_index") }}" class="btn btn-primary btn-lg">Inventaire</a>
                        <a href="{{ path('app_profile_index') }}" class="btn btn-primary btn-lg">Mon profil</a>
                    {% else %}
                        <a href="{{ path('app_register') }}" class="btn btn-primary btn-lg">CrÃ©er un compte</a>
                        <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg">Se connecter</a>
                    {% endif %}
                </div>
            </div>
        </section>

        {# â€”â€”â€” JEUX (cards) â€”â€”â€” #}
        <section class="mb-4">
            <style>
                .game-card {
                    border: none;
                    overflow: hidden;
                    border-radius: 1rem;
                    background: transparent;
                    display: flex;
                    height: 100%;
                    transition:
                        transform .25s ease,
                        box-shadow .25s ease,
                        filter .25s ease;
                }

                /* Wrapper pour format portrait responsive */
                .game-card-img-wrapper {
                    position: relative;
                    width: 100%;
                    padding-top: 150%; /* ratio portrait ~ 2:3 */
                    overflow: hidden;
                    border-radius: 1rem;
                }

                .game-card-img {
                    position: absolute;
                    inset: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    display: block;
                    transition:
                        transform .4s ease,
                        filter .4s ease;
                }

                .game-card:hover {
                    transform: translateY(-4px) scale(1.02);
                    box-shadow:
                        0 10px 25px rgba(0, 0, 0, 0.35),
                        0 0 0 1px rgba(255, 255, 255, 0.05);
                }

                .game-card:hover .game-card-img {
                    transform: scale(1.08);
                    filter: brightness(1.05) saturate(1.1);
                }

                .game-card-link {
                    cursor: pointer;
                }

                /* Fausse carte */
                .game-card-placeholder .game-card-img {
                    filter: grayscale(0.05) brightness(0.95);
                }

                .game-card-placeholder:hover .game-card-img {
                    filter: grayscale(0) brightness(1.05) saturate(1.1);
                }
            </style>

            <div class="d-flex align-items-center justify-content-between mb-2">
                <h2 class="h4 mb-0 texte-gris">Jeux disponibles</h2>
            </div>

            {# On force des lignes complÃ¨tes en se basant sur 5 colonnes Ã  partir du breakpoint md #}
            {% set columns = 5 %}
            {% set gamesCount = games|length %}

            {% if gamesCount == 0 %}
                {% set fillers = columns %}
            {% else %}
                {% set remainder = gamesCount % columns %}
                {% if remainder == 0 %}
                    {% set fillers = 0 %}
                {% else %}
                    {% set fillers = columns - remainder %}
                {% endif %}
            {% endif %}

            {% set fillerImageUrl = 'https://mediumrare.imgix.net/seeAll-en.jpg?&dpr=2&format=auto&auto=format&q=50&w=220' %}

            <div class="row row-cols-2 row-cols-md-5 g-3">
                {# Cartes rÃ©elles #}
                {% for game in games %}
                    <div class="col">
                        <a href="{{ game.url }}" class="text-decoration-none text-reset d-block h-100 game-card-link">
                            <div class="card shadow-sm game-card h-100">
                                <div class="game-card-img-wrapper">
                                    <img
                                        src="{{ game.imageUrl }}"
                                        class="card-img-top game-card-img"
                                        alt="{{ game.name }}"
                                        loading="lazy"
                                    >
                                </div>
                            </div>
                        </a>
                    </div>
                {% endfor %}

                {# Fausse cartes pour complÃ©ter la derniÃ¨re ligne (toujours un nombre pair / ligne complÃ¨te) #}
                {% for i in 1..fillers %}
                    <div class="col">
                        <div class="card shadow-sm game-card game-card-placeholder h-100" aria-hidden="true">
                            <div class="game-card-img-wrapper">
                                <img
                                    src="{{ fillerImageUrl }}"
                                    class="card-img-top game-card-img"
                                    alt="Plus de jeux Ã  venir"
                                    loading="lazy"
                                >
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>


    </main>
{% endblock %}
