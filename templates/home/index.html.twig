{% extends 'base_front.html.twig' %}

{% block title %}ðŸŽ° Symfsino - Accueil{% endblock %}

{% block page_content %}
    <main class="py-4">


        {# â€”â€”â€” HERO â€”â€”â€” #}
        <section class="py-5 mb-4 texte-gris rounded-3">
            <div class="container-fluid py-4">
                <h1 class="display-5 fw-bold">ðŸŽ° Symfsino</h1>
                <p class="col-lg-8 fs-5">
                    Bienvenue dans la salle de jeux. Slots, tirages & jackpots â€” simple, rapide, 100% fun.
                </p>
                <div class="d-flex flex-wrap gap-2 mt-3">
                    <a href="{{ path("app_leaderboard_index") }}" class="btn btn-primary btn-lg">Leaderboard</a>
                    <a href="{{ path("app_market_index") }}" class="btn btn-primary btn-lg">MarchÃ©</a>


                    {% if app.user %}
                        <a href="{{ path("app_inventory_index") }}" class="btn btn-primary btn-lg">Inventaire</a>
                        <a href="{{ path('app_profile_index') }}" class="btn btn-primary btn-lg">Mon profil</a>
                    {% else %}
                        <a href="{{ path('app_register') }}" class="btn btn-primary btn-lg">CrÃ©er un compte</a>
                        <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg">Se connecter</a>
                    {% endif %}
                </div>
            </div>
        </section>

        {# â€”â€”â€” JEUX (cards) â€”â€”â€” #}
        <section class="mb-4">
            <style>
                .game-card {
                    border: none;
                    overflow: hidden;
                    border-radius: 1rem;
                    background: radial-gradient(circle at top, rgba(255, 255, 255, 0.06), transparent 55%);
                    display: flex;
                    height: 100%;
                    transition:
                        transform .25s ease,
                        box-shadow .25s ease,
                        filter .25s ease,
                        background .25s ease;
                }

                .game-card-wrapper {
                    display: flex;
                    flex-direction: column;
                    gap: 0.35rem;
                    height: 100%;
                }

                .game-card-title {
                    font-size: 0.95rem;
                    font-weight: 600;
                    color: #e5e5f0;
                    letter-spacing: .02em;
                    transition:
                        transform .25s ease,
                        opacity .25s ease;
                }

                /* Wrapper format carrÃ© (adaptÃ© Ã  tes images) */
                .game-card-img-wrapper {
                    position: relative;
                    width: 100%;
                    padding-top: 100%; /* ratio 1:1 */
                    overflow: hidden;
                    border-radius: 1rem;
                    background: radial-gradient(circle at center, #1b1b23 0, #0c0c12 60%);
                }

                .game-card-img {
                    position: absolute;
                    inset: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    display: block;
                    transition:
                        transform .4s ease,
                        filter .4s ease;
                }

                .game-card-link {
                    cursor: pointer;
                    display: block;
                    height: 100%;
                    text-decoration: none;
                }

                /* Hover global sur le lien (nom + carte) */
                .game-card-link:hover .game-card {
                    transform: translateY(-6px) scale(1.02);
                    box-shadow:
                        0 14px 30px rgba(0, 0, 0, 0.45),
                        0 0 0 1px rgba(255, 255, 255, 0.08);
                    background: radial-gradient(circle at top, rgba(255, 255, 255, 0.12), transparent 60%);
                }

                .game-card-link:hover .game-card-img {
                    transform: scale(1.06);
                    filter: brightness(1.06) saturate(1.08);
                }

                .game-card-link:hover .game-card-title {
                    transform: translateY(10px);
                    opacity: 0;
                }

                /* Fausse carte */
                .game-card-placeholder .game-card-img {
                    filter: grayscale(0.1) brightness(0.95);
                }

                .game-card-placeholder:hover .game-card-img {
                    filter: grayscale(0) brightness(1.05) saturate(1.1);
                }
            </style>

            <div class="d-flex align-items-center justify-content-between mb-2">
                <h2 class="h4 mb-0 texte-gris">Jeux disponibles</h2>
            </div>

            {# On force au moins 2 lignes complÃ¨tes (5 colonnes) #}
            {% set columns = 5 %}
            {% set rows = 2 %}
            {% set gamesCount = games|length %}
            {% set baseTotal = columns * rows %}

            {% if gamesCount >= baseTotal %}
                {# Plus de 10 jeux : on garde le modulo pour complÃ©ter la derniÃ¨re ligne #}
                {% set remainder = gamesCount % columns %}
                {% if remainder == 0 %}
                    {% set fillers = 0 %}
                {% else %}
                    {% set fillers = columns - remainder %}
                {% endif %}
            {% else %}
                {# Moins de 10 jeux : on complÃ¨te jusqu'Ã  10 items #}
                {% set fillers = baseTotal - gamesCount %}
            {% endif %}

            {% set fillerImageUrl = asset('games/placeholder.png') %}

            <div class="row row-cols-2 row-cols-md-5 g-3">
                {# Cartes rÃ©elles #}
                {% for game in games %}
                    <div class="col">
                        <a href="{{ game.url }}" class="text-reset game-card-link">
                            <div class="game-card-wrapper">
                                <div class="game-card-title">
                                    {{ game.name }}
                                </div>
                                <div class="card shadow-sm game-card">
                                    <div class="game-card-img-wrapper">
                                        <img
                                            src="{{ asset(game.imageUrl) }}"
                                            class="card-img-top game-card-img"
                                            alt="{{ game.name }}"
                                            loading="lazy"
                                        >
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                {% endfor %}

                {# Fausse cartes pour complÃ©ter les lignes #}
                {% for i in 1..fillers %}
                    <div class="col">
                        <div class="game-card-wrapper game-card-placeholder" aria-hidden="true">
                            <div class="game-card-title">
                                BientÃ´t
                            </div>
                            <div class="card shadow-sm game-card h-100">
                                <div class="game-card-img-wrapper">
                                    <img
                                        src="{{ fillerImageUrl }}"
                                        class="card-img-top game-card-img"
                                        alt="Plus de jeux Ã  venir"
                                        loading="lazy"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>


    </main>
{% endblock %}
